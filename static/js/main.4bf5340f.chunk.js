(this["webpackJsonpfirst-project"]=this["webpackJsonpfirst-project"]||[]).push([[0],{15:function(e,t,n){e.exports={form:"loginForm_form___vmqz",title:"loginForm_title__3uuSH",inputHolder:"loginForm_inputHolder__xE0ZZ",label:"loginForm_label__3r0jD",buttonsHolder:"loginForm_buttonsHolder__1dxtJ",button:"loginForm_button__29a8f",checkbox:"loginForm_checkbox__3-2G8"}},22:function(e,t,n){e.exports={inputError:"FormsControls_inputError__s0mQI",span:"FormsControls_span__3TSqb"}},23:function(e,t,n){e.exports={link:"Users_link__3IxhJ",profileImg:"Users_profileImg__1izDU",followBtn:"Users_followBtn__1r_oy",profilesHolder:"Users_profilesHolder__1-l9U",profilesHolderImg:"Users_profilesHolderImg__3BL-G",container:"Users_container__24xva"}},26:function(e,t,n){e.exports={socialMediaHolder:"SocialMedia_socialMediaHolder__y9mB4",socialMedia:"SocialMedia_socialMedia__3a7H_"}},27:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2BLwD",dialogsItems:"Dialogs_dialogsItems__1nHuE",messagesItems:"Dialogs_messagesItems__21VyM",sendBtn:"Dialogs_sendBtn__37Ejl",sendInput:"Dialogs_sendInput__1jn9E"}},28:function(e,t,n){e.exports={profileInfoHolder:"ProfileInfo_profileInfoHolder__2i9Sq",imgHolder:"ProfileInfo_imgHolder__3Kswx",profileName:"ProfileInfo_profileName__1tgxV",item:"ProfileInfo_item__YA_5i"}},33:function(e,t,n){e.exports={pagesHolder:"PageCount_pagesHolder__2dxt0",currentPage:"PageCount_currentPage__1CB09",notCurrentPage:"PageCount_notCurrentPage__1NQd1",page:"PageCount_page__Z32PU"}},34:function(e,t,n){e.exports={myPosts:"MyPosts_myPosts__MCAn3",addPost:"MyPosts_addPost__1b-ok",addPostHolder:"MyPosts_addPostHolder__1fyo-",addPostInput:"MyPosts_addPostInput__mjaBD",addPostBtn:"MyPosts_addPostBtn__1qk6i"}},48:function(e,t,n){e.exports={sideBar:"SideBar_sideBar__GOVnH"}},49:function(e,t,n){e.exports={dialogs:"DialogItem_dialogs__8pyXP",dialogsItems:"DialogItem_dialogsItems__3rYWC",dialog:"DialogItem_dialog__2ttKY",messagesItems:"DialogItem_messagesItems__EeWHT",message:"DialogItem_message__1Wi3Q"}},50:function(e,t,n){e.exports={dialogs:"Message_dialogs__1ARIv",dialogsItems:"Message_dialogsItems__KBDpZ",dialog:"Message_dialog__1ichu",messagesItems:"Message_messagesItems__28ZbN",message:"Message_message__1iHbH"}},53:function(e,t,n){e.exports={preloaderHolder:"Preloader_preloaderHolder__3YbOv"}},57:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},9:function(e,t,n){e.exports={nav:"Nav_nav__3vif5",item:"Nav_item__2T4Rf",links:"Nav_links__hEtJk"}},92:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=(n(57),n(35)),i=n.n(a),c=n(18),o=n(19),u=n(21),l=n(20),d=n(5),j=(n(61),n(48)),b=n.n(j),p=n(26),f=n.n(p),h=n(0),g=function(){return Object(h.jsxs)("div",{className:f.a.socialMediaHolder,children:[Object(h.jsx)("div",{className:f.a.socialMedia,children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-instagram",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"})})})}),Object(h.jsx)("div",{className:f.a.socialMedia,children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-facebook",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"})})})}),Object(h.jsx)("div",{className:f.a.socialMedia,children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-linkedin",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"})})})}),Object(h.jsx)("div",{className:f.a.socialMedia,children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-telegram",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"})})})})]})},m=function(){return Object(h.jsx)("div",{className:b.a.sideBar,children:Object(h.jsx)(g,{})})},O=function(){return Object(h.jsx)("div",{children:"News"})},x=function(){return Object(h.jsx)("div",{children:"Music"})},v=(n(63),function(){return Object(h.jsx)("div",{children:"Settings"})}),_=n(25),w=n(2),P="SEND-MESSAGE",N={dialogs:[{id:1,name:"Dmytro"},{id:2,name:"Roma"},{id:3,name:"Alina"},{id:4,name:"Misha"},{id:5,name:"Oksana"}],messages:[{id:1,message:"Hi"},{id:2,message:"Hi"},{id:3,message:"Hi"},{id:4,message:"Hi"},{id:5,message:"Hi"}]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:var n=t.newMessage;return Object(w.a)(Object(w.a)({},e),{},{messages:[].concat(Object(_.a)(e.messages),[{id:6,message:n}])});default:return e}},C=n(27),S=n.n(C),y=n(49),k=n.n(y),F=n(8),H=function(e){var t="/dialogs/".concat(e.id);return Object(h.jsx)("div",{className:k.a.dialog,children:Object(h.jsx)(F.b,{to:t,children:e.name})})},M=n(50),E=n.n(M),U=function(e){return Object(h.jsx)("div",{className:E.a.message,children:e.message})},A=n(17),z=n(15),T=n.n(z),D=function(e){return Object(h.jsx)(A.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit,n=(e.form,e.submitting);e.pristine;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(A.a,{name:"message",children:function(e){var t=e.input,n=e.meta;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"text",className:S.a.sendInput,placeholder:"Enter your message"})),n.error&&n.touched&&Object(h.jsx)("span",{className:T.a.span,children:n.error})]})}}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",disabled:n,className:S.a.sendBtn,children:"Submit"})})]})}})},R=function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(h.jsx)(H,{name:e.name,id:e.id},e.id)})),n=e.dialogsPage.messages.map((function(e){return Object(h.jsx)(U,{message:e.message},e.id)}));if(!e.isAuth)return Object(h.jsx)(d.Redirect,{to:"/login"});return Object(h.jsxs)("div",{className:S.a.dialogs,children:[Object(h.jsx)("div",{className:S.a.dialogsItems,children:t}),Object(h.jsxs)("div",{className:S.a.messagesItems,children:[Object(h.jsx)("div",{children:n}),Object(h.jsx)(D,{onSubmit:function(t){e.sendMessage(t.message)}})]})]})},B=n(7),L=function(e){return{isAuth:e.auth.isAuth}},G=function(e){var t=function(t){Object(u.a)(s,t);var n=Object(l.a)(s);function s(){return Object(c.a)(this,s),n.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(h.jsx)(e,Object(w.a)({},this.props)):Object(h.jsx)(d.Redirect,{to:"/login"})}}]),s}(r.a.Component);return Object(B.b)(L)(t)},V=n(16),W=Object(V.c)(Object(B.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:P,newMessage:e}}(t))}}})),G)(R),Z=n(4),q=n.n(Z),J=n(13),Y=n(52).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"85a370a3-bfb0-4172-a765-a18776c646a6"}}),K={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Y.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return Y.post("follow/".concat(e))},unfollow:function(e){return Y.delete("follow/".concat(e))}},Q=function(e){return Y.get("profile/".concat(e))},X=function(e){return Y.get("profile/status/".concat(e))},$=function(e){return Y.put("profile/status",{status:e})},ee=function(){return Y.get("auth/me")},te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Y.post("auth/login",{email:e,password:t,rememberMe:n})},ne=function(){return Y.delete("auth/login")},se="FOLLOW",re="UNFOLLOW",ae="SET_USERS",ie="SET_CURRENT_PAGE",ce="SET_TOTAL_USERS_COUNT",oe="TOGGLE_IS_FETCHING",ue="TOGGLE_IS_FOLLOWING_PROGRESS",le={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,isFollowingInProgress:[]},de=function(e){return{type:se,userID:e}},je=function(e){return{type:re,userID:e}},be=function(e){return{type:ie,currentPage:e}},pe=function(e){return{type:oe,isFetching:e}},fe=function(e,t){return{type:ue,isFollowingInProgress:e,userId:t}},he=function(){var e=Object(J.a)(q.a.mark((function e(t,n,s,r){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(fe(!0,n)),e.next=3,s(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(fe(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,s,r){return e.apply(this,arguments)}}(),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(w.a)(Object(w.a)({},e),{},{isFollow:!0}):e}))});case re:return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(w.a)(Object(w.a)({},e),{},{isFollow:!1}):e}))});case ae:return Object(w.a)(Object(w.a)({},e),{},{users:Object(_.a)(t.users)});case ie:return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case ce:return Object(w.a)(Object(w.a)({},e),{},{totalUsersCount:t.totalUsersCount});case oe:return Object(w.a)(Object(w.a)({},e),{},{isFetching:t.isFetching});case ue:return Object(w.a)(Object(w.a)({},e),{},{isFollowingInProgress:t.isFollowingInProgress?[].concat(Object(_.a)(e.isFollowingInProgress),[t.userId]):e.isFollowingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},me=n(23),Oe=n.n(me),xe=n.p+"static/media/user.33e7df09.png",ve=n(32),_e=n(33),we=n.n(_e),Pe=function(e){for(var t=e.totalItemCount,n=e.pageSize,r=e.onPageChanged,a=void 0===r?function(e){return e}:r,i=e.currentPage,c=void 0===i?1:i,o=e.portionSize,u=void 0===o?10:o,l=Math.ceil(t/n),d=[],j=0;j<l;j++)d.push(j+1);var b=Math.ceil(l/u),p=Object(s.useState)(1),f=Object(ve.a)(p,2),g=f[0],m=f[1],O=(g-1)*u+1,x=g*u;return Object(h.jsxs)("div",{className:we.a.pagesHolder,children:[g>1&&Object(h.jsx)("button",{onClick:function(){m(g-1)},children:"PREV"}),d.filter((function(e){return e>=O&&e<=x})).map((function(e){return Object(h.jsx)("span",{className:"".concat(e===c?we.a.currentPage:we.a.notCurrentPage," ").concat(we.a.page),onClick:function(t){a(e)},children:e},e)})),b>g&&Object(h.jsx)("button",{onClick:function(){m(g+1)},children:"NEXT"})]})},Ne=function(e){return Object(h.jsxs)("div",{className:Oe.a.container,children:[Object(h.jsx)(Pe,{totalItemCount:e.totalUsersCount,pageSize:e.pageSize,onPageChanged:e.onPageChanged,currentPage:e.currentPage}),e.users.map((function(t){return Object(h.jsxs)("div",{className:Oe.a.profilesHolder,children:[Object(h.jsxs)("div",{className:Oe.a.profilesHolderImg,children:[Object(h.jsxs)(F.b,{className:Oe.a.link,to:"/profile/"+t.id,children:[Object(h.jsx)("img",{src:t.photos.small?t.photos.small:xe,className:Oe.a.profileImg,alt:"profile photo small"}),Object(h.jsx)("h4",{children:t.name})]}),t.isFollow?Object(h.jsx)("button",{disabled:e.isFollowingInProgress.some((function(e){return e===t.id})),className:Oe.a.followBtn,onClick:function(){e.unFollow(t.id)},children:"UNFOLLOW"}):Object(h.jsx)("button",{disabled:e.isFollowingInProgress.some((function(e){return e===t.id})),className:Oe.a.followBtn,onClick:function(){e.follow(t.id)},children:"FOLLOW"})]}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:t.status}),Object(h.jsx)("li",{children:"Country"}),Object(h.jsx)("li",{children:"City"})]})})})]},t.id)}))]})},Ie=n.p+"static/media/6d391369321565.5b7d0d570e829.4334c9cc.gif",Ce=n(53),Se=n.n(Ce),ye=function(){return Object(h.jsx)("div",{className:Se.a.preloaderHolder,children:Object(h.jsx)("img",{src:Ie,alt:"preloader"})})},ke=function(e){return e.userPage.users},Fe=function(e){return e.userPage.pageSize},He=function(e){return e.userPage.totalUsersCount},Me=function(e){return e.userPage.currentPage},Ee=function(e){return e.userPage.isFetching},Ue=function(e){return e.userPage.isFollowingInProgress},Ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).onPageChanged=function(e){s.props.getUsers(e,s.props.pageSize)},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[this.props.isFetching?Object(h.jsx)(ye,{}):null,Object(h.jsx)(Ne,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,onPageChanged:this.onPageChanged,unFollow:this.props.unFollow,follow:this.props.follow,isFollowingInProgress:this.props.isFollowingInProgress})]})}}]),n}(r.a.Component),ze=Object(V.c)(Object(B.b)((function(e){return{users:ke(e),pageSize:Fe(e),totalUsersCount:He(e),currentPage:Me(e),isFetching:Ee(e),isFollowingInProgress:Ue(e)}}),{follow:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he(n,e,K.follow.bind(K),de);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollow:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he(n,e,K.follow.bind(K),je);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:be,setIsFollowingInProgress:fe,getUsers:function(e,t){return function(){var n=Object(J.a)(q.a.mark((function n(s){var r;return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(pe(!0)),s(be(e)),n.next=4,K.getUsers(e,t);case 4:r=n.sent,s(pe(!1)),s((i=r.items,{type:ae,users:i})),s((a=r.totalCount,{type:ce,totalUsersCount:a}));case 9:case"end":return n.stop()}var a,i}),n)})));return function(e){return n.apply(this,arguments)}}()}}),G)(Ae),Te=n(28),De=n.n(Te),Re=function(e){var t=Object(s.useState)(!1),n=Object(ve.a)(t,2),r=n[0],a=n[1],i=Object(s.useState)(e.status),c=Object(ve.a)(i,2),o=c[0],u=c[1];Object(s.useEffect)((function(){u(e.status)}),[e.status]);return Object(h.jsx)("div",{children:r?Object(h.jsx)("div",{children:Object(h.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},onBlur:function(){a(!1),e.updateStatus(o)},autoFocus:!0,value:o})}):Object(h.jsx)("div",{children:Object(h.jsxs)("span",{onDoubleClick:function(){a(!0)},children:[e.status||"STATUS"," "]})})})},Be=function(e){return e.profile?Object(h.jsxs)("div",{className:"".concat(De.a.profileInfoHolder),children:[Object(h.jsx)("div",{className:"".concat(De.a.item),children:Object(h.jsx)("div",{className:"".concat(De.a.imgHolder," "),children:Object(h.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:xe,alt:"Photo"})})}),Object(h.jsxs)("div",{className:"".concat(De.a.profileName," ").concat(De.a.item),children:[Object(h.jsx)("h2",{children:e.profile.fullName}),Object(h.jsx)(Re,{status:e.status,updateStatus:e.updateStatus})]})]}):Object(h.jsx)(ye,{})},Le="ADD-POST",Ge="DELETE_POST",Ve="SET_USER_PROFILE",We="SET_STATUS",Ze={posts:[{id:1,message:"Hello",likesCount:12},{id:2,message:"Hi",likesCount:17}],profile:null,status:""},qe=function(e){return{type:We,status:e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:var n={id:5,message:t.postMessage,likesCount:9};return Object(w.a)(Object(w.a)({},e),{},{posts:[].concat(Object(_.a)(e.posts),[n])});case Ve:return Object(w.a)(Object(w.a)({},e),{},{profile:t.profile});case We:return Object(w.a)(Object(w.a)({},e),{},{status:t.status});case Ge:return Object(w.a)(Object(w.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}},Ye=n(34),Ke=n.n(Ye),Qe=function(e){return Object(h.jsxs)("div",{children:[e.message,Object(h.jsx)("span",{children:e.likesCount})]})},Xe=function(e){return e?void 0:"Required"},$e=n(22),et=n.n($e),tt=r.a.memo((function(e){var t=e.posts.map((function(e,t){return Object(h.jsx)(Qe,{message:e.message,likesCount:e.likesCount},t)}));return Object(h.jsxs)("div",{className:Ke.a.myPosts,children:[Object(h.jsxs)("div",{className:Ke.a.addPost,children:[Object(h.jsx)("h2",{children:"My posts"}),Object(h.jsx)(nt,{onSubmit:function(t){e.addPost(t.postMessage)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"New posts"}),t]})]})})),nt=function(e){return Object(h.jsx)(A.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit,n=e.submitting;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(A.a,{name:"postMessage",validate:Xe,children:function(e){var t=e.input,n=e.meta,s=n.error&&n.touched;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"text",placeholder:"New post",className:"".concat(Ke.a.addPostInput," ").concat(s&&et.a.inputError)})),s&&Object(h.jsx)("span",{className:et.a.span,children:n.error})]})}}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",disabled:n,className:Ke.a.addPostBtn,children:"Add post"})})]})}})},st=tt,rt=Object(B.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:Le,postMessage:e}}(t))}}}))(st),at=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)(Be,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(h.jsx)(rt,{})]})},it=n(54),ct=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.logUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"render",value:function(){return Object(h.jsx)(at,Object(w.a)(Object(w.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),n}(r.a.Component),ot=Object(V.c)(Object(B.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,logUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e);case 2:s=t.sent,n((r=s.data,{type:Ve,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(n){var s;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:s=t.sent,n(qe(s.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:0===t.sent.data.resultCode&&n(qe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),it.withRouter)(ct),ut=n(9),lt=n.n(ut),dt=function(e){return Object(h.jsxs)("nav",{className:lt.a.nav,children:[Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/profile",className:lt.a.links,children:"Profile"})}),Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/users",className:lt.a.links,children:"Users"})}),Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/dialogs",className:lt.a.links,children:"Messages"})}),Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/news",className:lt.a.links,children:"News"})}),Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/music",className:lt.a.links,children:"Music"})}),Object(h.jsx)("div",{className:lt.a.item,children:Object(h.jsx)(F.b,{to:"/settings",className:lt.a.links,children:"Settings"})}),Object(h.jsx)("div",{className:lt.a.item,children:e.isAuth?Object(h.jsxs)("div",{children:[e.login," - ",Object(h.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(h.jsx)(F.b,{to:"/login",className:lt.a.links,children:"Login"})})]})},jt="SET_USER_DATE",bt="TOGGLE_IS_FETCHING",pt={id:null,login:null,email:null,isFetching:!1,isAuth:!1},ft=function(e,t,n,s){return{type:jt,data:{id:e,email:t,login:n,isAuth:s}}},ht=function(e){return{type:bt,isFetching:e}},gt=function(){return function(){var e=Object(J.a)(q.a.mark((function e(t){var n,s,r,a,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:n=e.sent,t(ht(!0)),0===n.data.resultCode&&(s=n.data.data,r=s.id,a=s.login,i=s.email,t(ft(r,i,a,!0)),t(ht(!1)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},mt=function(){return function(){var e=Object(J.a)(q.a.mark((function e(t){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:n=e.sent,t(ht(!0)),0===n.data.resultCode&&(t(ft(null,null,null,!1)),t(ht(!1)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(w.a)(Object(w.a)({},e),t.data);case bt:return Object(w.a)(Object(w.a)({},e),{},{isFetching:t.isFetching});default:return e}},xt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsx)(dt,Object(w.a)({},this.props))}}]),n}(r.a.Component),vt=Object(B.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:mt})(xt),_t=Object(B.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var s=Object(J.a)(q.a.mark((function s(r){var a;return q.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,te(e,t,n);case 2:a=s.sent,r(ht(!0)),0===a.data.resultCode?(r(gt()),r(ht(!1))):alert(a.data.messages[0]);case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},logout:mt})((function(e){return e.isAuth?Object(h.jsx)(d.Redirect,{to:"/profile"}):Object(h.jsx)(A.b,{onSubmit:function(t){console.log(t),e.login(t.email,t.password,t.rememberMe)},render:function(e){var t=e.handleSubmit,n=e.form,s=e.submitting,r=e.pristine;return Object(h.jsxs)("form",{onSubmit:t,className:T.a.form,children:[Object(h.jsx)(A.a,{name:"email",validate:Xe,children:function(e){var t=e.input,n=e.meta,s=n.error&&n.touched;return Object(h.jsxs)("div",{className:T.a.inputHolder,children:[Object(h.jsx)("label",{className:T.a.label,children:"Login"}),Object(h.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"text",placeholder:"Login",className:"".concat(s&&et.a.inputError)})),s&&Object(h.jsx)("span",{className:et.a.span,children:n.error})]})}}),Object(h.jsx)(A.a,{name:"password",validate:Xe,children:function(e){var t=e.input,n=e.meta,s=n.error&&n.touched;return Object(h.jsxs)("div",{className:T.a.inputHolder,children:[Object(h.jsx)("label",{className:T.a.label,children:"Password"}),Object(h.jsx)("input",Object(w.a)(Object(w.a)({},t),{},{type:"password",placeholder:"Password",className:"".concat(s&&et.a.inputError)})),n.error&&n.touched&&Object(h.jsx)("span",{className:et.a.span,children:n.error})]})}}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:T.a.label,children:"Remember me"}),Object(h.jsx)(A.a,{name:"rememberMe",component:"input",type:"checkbox",className:T.a.checkbox})]}),Object(h.jsxs)("div",{className:T.a.buttonsHolder,children:[Object(h.jsx)("button",{type:"submit",disabled:s,className:T.a.button,children:"Submit"}),Object(h.jsx)("button",{className:T.a.button,type:"button",onClick:n.reset,disabled:s||r,children:"Reset"})]})]})}},"login form")})),wt="INITIALIZED_SUCCESS",Pt={initialized:!1},Nt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(h.jsxs)("div",{className:"app-wrapper",children:[Object(h.jsx)(vt,{}),Object(h.jsx)(m,{}),Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)(d.Route,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(ot,{})}}),Object(h.jsx)(d.Route,{path:"/dialogs",render:function(){return Object(h.jsx)(W,{})}}),Object(h.jsx)(d.Route,{path:"/news",render:function(){return Object(h.jsx)(O,{})}}),Object(h.jsx)(d.Route,{path:"/music",render:function(){return Object(h.jsx)(x,{})}}),Object(h.jsx)(d.Route,{path:"/settings",render:function(){return Object(h.jsx)(v,{})}}),Object(h.jsx)(d.Route,{path:"/users",render:function(){return Object(h.jsx)(ze,{})}}),Object(h.jsx)(d.Route,{path:"/login",render:function(){return Object(h.jsx)(_t,{})}})]})]}):Object(h.jsx)(ye,{})}}]),n}(r.a.Component),It=Object(V.c)(d.withRouter,Object(B.b)((function(e){return{initialized:e.appPage.initialized}}),{initializeApp:function(){return function(e){e(gt()).then((function(){e({type:wt})}))}}}))(Nt),Ct=n(55),St=Object(V.b)({dialogsPage:I,profilePage:Je,userPage:ge,auth:Ot,appPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return Object(w.a)(Object(w.a)({},e),{},{initialized:!0});default:return e}}}),yt=Object(V.d)(St,Object(V.a)(Ct.a));window.store=yt;var kt=yt;i.a.render(Object(h.jsx)(F.a,{children:Object(h.jsx)(B.a,{store:kt,children:Object(h.jsx)(It,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.4bf5340f.chunk.js.map